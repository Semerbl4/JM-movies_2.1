{"version":3,"sources":["services/MoviesApiService.js","components/context/context.jsx","components/Filters/Filters.jsx","components/Search/Search.jsx","components/MovieCard/MovieCard.jsx","components/MoviesList/MoviesList.jsx","components/App/App.jsx","index.jsx"],"names":["MoviesApiService","apiKey","getMovies","title","a","page","currentPage","fetch","movies","ok","json","Error","status","getGenres","genres","getGuestSessionId","GetGuestSession","guest_session_id","rateMovie","value","id","guestId","rating","method","headers","body","JSON","stringify","response","getGuestRatedMovies","guestSesId","React","createContext","GenresProvider","Provider","GenresConsumer","Consumer","Filters","props","setSearchMode","setRatedMovies","guestSessionId","toogleLoading","setError","moviesApiService","className","type","name","onClick","event","then","resolve","catch","reject","Search","state","changedInput","inpValue","setState","target","prevProp","prevState","this","changeMovies","placeholder","onChange","debounce","Component","defaultProps","MovieCard","poster","releaseDate","overview","guestRating","genreIds","shortOverview","split","slice","push","moviesApiServise","createGenres","allGenresIds","gnrIds","genresForCard","forEach","el","allGenEl","src","forPoster","alt","style","borderColor","window","matchMedia","matches","join","count","allowHalf","defaultValue","width","number","MoviesList","srchMode","loading","searchMode","ratedMovies","size","map","original_title","poster_path","release_date","vote_average","genre_ids","App","error","totalPages","moviesNotFound","online","navigator","onLine","results","err","message","evnt","res","total_pages","length","rej","setCurrentPage","isMoviesFound","defaultCurrent","total","showSizeChanger","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.97f68a00.chunk.js","sourcesContent":["class MoviesApiService {\n  apiKey = 'c33f54366ccf34ec81775c2d46bea63e';\n\n  // получает объект с инфой о фильмах\n  getMovies = async (title, page = null) => {\n    let currentPage = page;\n\n    if (page) {\n      currentPage = `&page=${page}`;\n    } else {\n      currentPage = ``;\n    }\n\n    let movies = await fetch(\n      `https://api.themoviedb.org/3/search/movie?api_key=${this.apiKey}&query=${title}${currentPage}`\n    );\n    // console.log(movies, 'фильмецы')\n\n    if (movies.ok) {\n      movies = await movies.json();\n      return movies;\n    }\n\n    throw new Error(movies.status);\n    // console.log(this.state)\n  };\n\n  // получает жанры при запуске приложения\n  getGenres = async () => {\n    let genres = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${this.apiKey}&language=en-US`);\n    if (genres.ok) {\n      genres = await genres.json();\n      // console.log(genres, 'все жанры')\n      return genres.genres;\n    }\n\n    throw new Error(genres.status);\n  };\n\n  // получает ID сессии гостя при запуске приложения\n  getGuestSessionId = async () => {\n    let GetGuestSession = await fetch(\n      `https://api.themoviedb.org/3/authentication/guest_session/new?api_key=${this.apiKey}`\n    );\n    if (GetGuestSession.ok) {\n      GetGuestSession = await GetGuestSession.json();\n      // console.log(GetGuestSession.guest_session_id)\n      return GetGuestSession.guest_session_id;\n    }\n\n    throw new Error(GetGuestSession.status);\n  };\n\n  // позволяет оценивать фильмы. Используется при нажатии на звёздочку\n  rateMovie = async (value, id, guestId) => {\n    const rating = { value };\n\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${id}/rating?api_key=${this.apiKey}&guest_session_id=${guestId}`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8',\n        },\n        body: JSON.stringify(rating),\n      }\n    );\n\n    await response.json();\n    // console.log(response)\n  };\n\n  // позволяет получить оцененные пользователем фильмы по его ID сессии\n  getGuestRatedMovies = async (guestSesId) => {\n    let movies = await fetch(\n      `https://api.themoviedb.org/3/guest_session/${guestSesId}/rated/movies?api_key=${this.apiKey}`\n    );\n    if (movies.ok) {\n      // console.log(movies)\n      movies = await movies.json();\n      // console.log(movies)\n      return movies;\n    }\n\n    throw new Error(movies.status);\n  };\n}\n\nexport default MoviesApiService;\n","import React from 'react';\n\nconst { Provider: GenresProvider, Consumer: GenresConsumer } = React.createContext();\n\nexport { GenresProvider, GenresConsumer };\n","import './Filters.css';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport MoviesApiService from '../../services/MoviesApiService';\n\nconst Filters = (props) => {\n  const { setSearchMode, setRatedMovies, guestSessionId, toogleLoading, setError } = props;\n\n  const moviesApiService = new MoviesApiService();\n\n  return (\n    <ul className=\"filters\" type=\"none\">\n      <li className=\"filters__filter\">\n        <button\n          className=\"filters__button\"\n          type=\"button\"\n          name=\"search\"\n          onClick={(event) => {\n            setSearchMode(event);\n          }}\n        >\n          Search\n        </button>\n      </li>\n      <li className=\"filters__filter\">\n        <button\n          className=\"filters__button\"\n          type=\"submit\"\n          name=\"rated\"\n          onClick={(event) => {\n            toogleLoading();\n            moviesApiService\n              .getGuestRatedMovies(guestSessionId)\n              .then((resolve) => {\n                setRatedMovies(resolve);\n              })\n              .then(() => setSearchMode(event))\n              .then(() => toogleLoading())\n              .catch((reject) => {\n                setError(reject);\n              });\n          }}\n        >\n          Rated\n        </button>\n      </li>\n    </ul>\n  );\n};\n\nFilters.propTypes = {\n  setSearchMode: PropTypes.func.isRequired,\n  setRatedMovies: PropTypes.func.isRequired,\n  guestSessionId: PropTypes.string.isRequired,\n  toogleLoading: PropTypes.func.isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nexport default Filters;\n","import './Search.css';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { debounce } from 'lodash';\n\nimport MoviesApiService from '../../services/MoviesApiService';\n\nclass Search extends React.Component {\n  moviesApiService = new MoviesApiService();\n\n  state = {\n    value: '',\n  };\n\n  static defaultProps = {\n    changeMovies: () => {},\n    currentPage: 1,\n  };\n\n  static propTypes = {\n    changeMovies: PropTypes.func,\n    currentPage: PropTypes.number,\n  };\n\n  componentDidUpdate(prevProp, prevState) {\n    const { currentPage } = this.props;\n    const { value } = this.state;\n    const { changeMovies } = this.props;\n\n    if ((prevState.value !== value || prevProp.currentPage !== currentPage) && value !== '') {\n      changeMovies(value, currentPage);\n    }\n  }\n\n  changedInput = (inpValue) => {\n    this.setState({ value: inpValue.target.value });\n  };\n\n  render() {\n    return (\n      <input\n        type=\"text\"\n        placeholder=\"Type to search...\"\n        className=\"search\"\n        onChange={debounce((event) => {\n          this.changedInput(event);\n        }, 1000)}\n      />\n    );\n  }\n}\n\nexport default Search;\n","import './MovieCard.css';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Rate } from 'antd';\n\nimport MoviesApiService from '../../services/MoviesApiService';\n\nimport { GenresConsumer } from '../context/context';\n\nconst MovieCard = (props) => {\n  // const {key} = props\n\n  // console.log(props)\n\n  const { title, poster, releaseDate, rating, overview, id, guestSessionId, guestRating, genreIds } = props;\n  const shortOverview = overview.split(' ').slice(0, 20);\n  shortOverview.push('...');\n\n  // console.log(guestRating)\n\n  const moviesApiServise = new MoviesApiService();\n\n  const changeRatingColor = () => {\n    if (rating <= 3) {\n      return { borderColor: '#E90000' };\n    }\n    if (rating <= 5) {\n      return { borderColor: '#E97E00' };\n    }\n    if (rating <= 7) {\n      return { borderColor: '#E9D100' };\n    }\n    return { borderColor: '#66E900' };\n  };\n\n  const posterLink = (forPoster) => {\n    if (poster === null) {\n      return null;\n    }\n    return `https://image.tmdb.org/t/p/w500${forPoster}`;\n  };\n\n  const createGenres = (allGenresIds, gnrIds) => {\n    const genresForCard = [];\n\n    gnrIds.forEach((el) => {\n      allGenresIds.forEach((allGenEl) => {\n        if (allGenEl.id === el) {\n          genresForCard.push(\n            <li className=\"movie-card__category\" key={el}>\n              {allGenEl.name}\n            </li>\n          );\n        }\n      });\n    });\n    // console.log(genresForCard, 'Наш массив элементов')\n    return genresForCard;\n  };\n\n  return (\n    <GenresConsumer>\n      {(getGenres) => (\n        <div className=\"movie-card\">\n          <img className=\"movie-card__poster\" src={posterLink(poster)} alt=\"Постер\" />\n          <div className=\"movie-card__information\">\n            <h5 className=\"movie-card__title\">{title}</h5>\n            <div className=\"movie-card__raiting\" style={changeRatingColor()}>\n              <p>{rating}</p>\n            </div>\n            <p className=\"movie-card__date\">{releaseDate}</p>\n            <ul className=\"movie-card__categorys-list\" type=\"none\">\n              {createGenres(getGenres, genreIds)}\n            </ul>\n            {!window.matchMedia('(max-width: 420px)').matches ? (\n              <p className=\"movie-card__overview\">{shortOverview.join(' ')}</p>\n            ) : null}\n            <Rate\n              count={10}\n              allowHalf\n              defaultValue={guestRating}\n              style={{ width: `${231}px` }}\n              onChange={(number) => {\n                moviesApiServise.rateMovie(number, id, guestSessionId);\n              }}\n            />\n          </div>\n          {window.matchMedia('(max-width: 420px)').matches ? (\n            <p className=\"movie-card__overview\">{shortOverview.join(' ')}</p>\n          ) : null}\n        </div>\n      )}\n    </GenresConsumer>\n  );\n};\n\nMovieCard.defaultProps = {\n  releaseDate: 'Дата релиза неизвестна',\n  rating: 0,\n  overview: 'Описание отсутствует',\n  poster: null,\n  id: 0,\n  guestSessionId: null,\n  guestRating: 0,\n};\n\nMovieCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  poster: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.oneOf([null])]),\n  releaseDate: PropTypes.string,\n  rating: PropTypes.number,\n  overview: PropTypes.string,\n  id: PropTypes.number,\n  guestSessionId: PropTypes.oneOfType([PropTypes.string, PropTypes.oneOf([null])]),\n  guestRating: PropTypes.number,\n  genreIds: PropTypes.arrayOf(PropTypes.number).isRequired,\n};\n\nexport default MovieCard;\n","import './MoviesList.css';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Spin } from 'antd';\nimport MovieCard from '../MovieCard/MovieCard';\n\nconst MoviesList = (props) => {\n  const { movies } = props;\n  const { loading } = props;\n  const { guestSessionId } = props;\n  const { searchMode } = props;\n  const { ratedMovies } = props;\n\n  const createMovieCards = (srchMode) => {\n    // console.log(srchMode, ratedMovies)\n\n    const moviesForCards = srchMode ? movies : ratedMovies;\n\n    if (!movies) {\n      // console.log('ничего нет')\n      return null;\n    }\n\n    // console.log(moviesForCards, 'фильмы')\n\n    const movieCards = moviesForCards.map((el) => (\n      <li key={el.id} className=\"movie-list__item\">\n        <MovieCard\n          title={el.original_title}\n          overview={el.overview}\n          poster={el.poster_path}\n          releaseDate={el.release_date}\n          rating={el.vote_average}\n          id={el.id}\n          guestRating={el.rating}\n          genreIds={el.genre_ids}\n          guestSessionId={guestSessionId}\n        />\n      </li>\n    ));\n    // console.log(movieCards, 'Карточка')\n    return movieCards;\n  };\n\n  if (loading) {\n    return <Spin size=\"large\" className=\"spin_scale\" />;\n  }\n\n  return (\n    <ul className=\"movies-list\" type=\"none\">\n      {createMovieCards(searchMode)}\n    </ul>\n  );\n};\n\nMoviesList.defaultProps = {\n  movies: null,\n  loading: false,\n  guestSessionId: null,\n  ratedMovies: null,\n};\n\nMoviesList.propTypes = {\n  movies: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object), PropTypes.oneOf([null])]),\n  loading: PropTypes.bool,\n  guestSessionId: PropTypes.oneOfType([PropTypes.string, PropTypes.oneOf([null])]),\n  searchMode: PropTypes.bool.isRequired,\n  ratedMovies: PropTypes.oneOfType([PropTypes.array, PropTypes.oneOf([null])]),\n};\n\nexport default MoviesList;\n","import './App.css';\nimport 'antd/dist/antd.css';\n\nimport React from 'react';\n\nimport { Alert, Pagination } from 'antd';\n\nimport MoviesApiService from '../../services/MoviesApiService';\n\nimport { GenresProvider } from '../context/context';\n\nimport Filters from '../Filters/Filters';\nimport Search from '../Search/Search';\nimport MoviesList from '../MoviesList/MoviesList';\n\nexport default class App extends React.Component {\n  moviesApiServise = new MoviesApiService();\n\n  state = {\n    movies: null,\n    ratedMovies: null,\n    loading: false,\n    error: false,\n    totalPages: null,\n    currentPage: 1,\n    guestSessionId: '',\n    searchMode: true,\n    genres: null,\n    moviesNotFound: false,\n  };\n\n  online = window.navigator.onLine;\n\n  componentDidMount() {\n    this.moviesApiServise\n      .getGenres()\n      .then((res) => this.setState({ genres: res }))\n      .catch((rej) => {\n        this.setState({ error: rej.message });\n      });\n\n    this.moviesApiServise\n      .getGuestSessionId()\n      .then((res) => {\n        this.setState({ guestSessionId: res });\n      })\n      .catch((rej) => {\n        this.setState({ error: rej.message });\n      });\n  }\n\n  componentDidCatch(err) {\n    this.setState({ error: err });\n  }\n\n  toogleLoading = () => {\n    this.setState((state) => ({\n      loading: !state.loading,\n    }));\n  };\n\n  setRatedMovies = (movies) => {\n    // console.log(movies.results)\n    this.setState({\n      ratedMovies: movies.results,\n    });\n    // this.toogleLoading()\n  };\n\n  setError = (err) => {\n    this.setState({ error: err.message });\n  };\n\n  setSearchMode = (evnt) => {\n    if (evnt.target.name === 'search') {\n      this.setState({\n        searchMode: true,\n        currentPage: 1,\n        movies: null,\n      });\n    } else {\n      this.setState({ searchMode: false });\n    }\n  };\n\n  changeMovies = (title, page) => {\n    this.setState((state) => ({\n      loading: !state.loading,\n      totalPages: null,\n    }));\n\n    this.moviesApiServise\n      .getMovies(title, page)\n      .then((res) => {\n        this.setState((state) => ({\n          movies: res.results,\n          loading: !state.loading,\n          totalPages: res.total_pages,\n          moviesNotFound: res.results.length === 0,\n        }));\n      })\n      .catch((rej) => {\n        this.setState({ error: rej.message });\n      });\n  };\n\n  setCurrentPage = (page) => {\n    // console.log(page)\n    this.setState({ currentPage: page });\n  };\n\n  isMoviesFound = () => {\n    const { movies } = this.state;\n    const { loading } = this.state;\n    const { guestSessionId } = this.state;\n    const { ratedMovies } = this.state;\n    const { searchMode } = this.state;\n    const { moviesNotFound } = this.state;\n\n    if (moviesNotFound) {\n      return <p className=\"notFoundMessage\">Sry, this movie was not found</p>;\n    }\n    return (\n      <MoviesList\n        movies={movies}\n        ratedMovies={ratedMovies}\n        searchMode={searchMode}\n        loading={loading}\n        guestSessionId={guestSessionId}\n      />\n    );\n  };\n\n  render() {\n    const { movies } = this.state;\n    const { loading } = this.state;\n    const { error } = this.state;\n    const { totalPages } = this.state;\n    const { currentPage } = this.state;\n    const { guestSessionId } = this.state;\n    const { searchMode } = this.state;\n    const { genres } = this.state;\n\n    // console.log(totalPages)\n\n    if (!this.online) {\n      return <Alert type=\"warning\" message=\"Ваш интернет приказал долго жить (Отсутствует соединение сети)\" />;\n    }\n\n    if (error) {\n      return <Alert message={`Произошла ошибка ${error}`} type=\"error\" />;\n    }\n\n    return (\n      <GenresProvider value={genres}>\n        <main className=\"app\">\n          <div className=\"container\">\n            <Filters\n              guestSessionId={guestSessionId}\n              setSearchMode={this.setSearchMode}\n              setRatedMovies={this.setRatedMovies}\n              toogleLoading={this.toogleLoading}\n              setError={this.setError}\n            />\n            {searchMode ? <Search changeMovies={this.changeMovies} currentPage={currentPage} /> : null}\n            {this.isMoviesFound()}\n            {!loading && movies && searchMode ? (\n              <Pagination\n                className=\"pagination\"\n                defaultCurrent={currentPage}\n                total={totalPages * 10}\n                showSizeChanger={false}\n                onChange={(page) => {\n                  this.setCurrentPage(page);\n                }}\n              />\n            ) : null}\n          </div>\n        </main>\n      </GenresProvider>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}